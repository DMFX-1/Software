<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>C55XX CSL LP EXAMPLE: GPT EXAMPLE DOCUMENTATION</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">C55XX CSL LP EXAMPLE
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">GPT EXAMPLE DOCUMENTATION </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="GPT1"></a>
GPT1 EXAMPLE</h1>
<h2><a class="anchor" id="GPT1x"></a>
TEST DESCRIPTION:</h2>
<p>This test code verifies the functionality of the CSL GPT (General Purpose Timer) module. GPT module of C5535/C5515/C5517 DSP is used to provide interrupts to the CPU to schedule periodic tasks or a delayed task. GPT can be configured with a counter and pre-scaler divider value. When the GPT is started counter will be decremented to 0. The rate at which this count happens can be controlled by the prescaler divider value. GPT clock is derived by dividing the CPU clock with the pre-scaler divider value.</p>
<p>This test is having two parts. First part of the test verifies whether the GTP is decrementing the counter or not. GPT is configured with a count value 0xFFFF and pre-scaler divider value 256. GPT is started and counter value is read. After few cycles of delay GPT counter value is read again. Both the counter values are compared to verify whether the second count value is less than the first counter value or not.</p>
<p>During second part of the test timer count rate of the GPT is verified. As the GPT clock is derived from the CPU clock based on the pre-scaler value it possible to verify the GPT rate with respect to CPU clock rate. GPT pre-scaler value is set to divide by 4. So the counter runs at a speed that is 1/4th of the CPU clock. Clock at which the CPU is running during the test is calculated using the function getSysClk(). This function returns the value of system clock in KHz. Value of the system clock in KHz represents the CPU clock cycles for one millisecond. GPT count value is set to 1/4th of the CPU clock cycles for one millisecond. With this setup GPT should take one millisecond to count down the counter value to 0. In other way clock cycles executed by the CPU from the time GPT is started to the time counter value reaches 0 should be equal to the number of cycles that are executed by the CPU in one millisecond.GPT is configured to generate interrupt when the count value reaches to 0. GPT is started and the CPU clock cycles are counted in while loop. This loop increments a global variable 'cpuCycleCount' until the GPT generate time-out interrupt. This while loop execution is taking 12 CPU cycles. So the total CPU cycles executed will be 12*cpuCycleCount. At the end of the test this CPU cycles calculated are compared with the CPU clock cycles that will be executed in one millisecond. The calculated CPU cycles can vary ±1% from the actual CPU cycles. If this condition is satisfied GPT is running at the configured rate.</p>
<p>NOTE: THIS TEST HAS BEEN DEVELOPED TO WORK WITH CHIP VERSIONS C5535, C5515 AND C5517. MAKE SURE THAT PROPER CHIP VERSION MACRO IS DEFINED IN THE FILE c55xx_csl\inc\csl_general.h.</p>
<h2><a class="anchor" id="GPT1y"></a>
TEST PROCEDURE:</h2>
<ul>
<li>Open the CCS and connect the target (C5535/C5515 EVM or C5517 EVM)) </li>
<li>Open the project "CSL_GPTExampale_Out.pjt" and build it </li>
<li>Load the program on to the target </li>
<li>Set the PLL frequency to 12.288MHz </li>
<li>Run the program and observe the test result </li>
<li>Repeat the test at the following PLL frequencies C5515: 60MHz and 100MHz C5517: 60MHz, 100MHz, 150MHz and 200MHz C5535 eZdsp: 60MHz and 100MHz </li>
<li>Repeat the test in Release mode</li>
</ul>
<h2><a class="anchor" id="GPT1z"></a>
TEST RESULT:</h2>
<ul>
<li>All the CSL APIs should return success </li>
<li>Timer count value comparison should be successful in the first part of the test </li>
<li>Timer should run at the configured rate in the second part of the test</li>
</ul>
<h1><a class="anchor" id="GPT2"></a>
GPT EXAMPLE 2 - Nested interrupt functionality of TIMERS</h1>
<h2><a class="anchor" id="GPT2x"></a>
TEST DESCRIPTION:</h2>
<p>This test code verifies the functionality of all the timers. GPTx module of C5517 DSP is used to Non Maskable Interrupt also. The normal TINT interrupts to the CPU to schedule periodic tasks or a delayed task.But the NMI which will have the higher priority above all interrupts and cannot be masked out. In this example TIMER0 is configured for producing NMI and TIMER2,TIMER for TINT. The TIMER2 is given a less count value than TIMER1 and TIMER0. The example demonstrates a condition in which TIMER2 ISR hits first, while inside ISR, NMI triggers and same time or in NMI ISR, TIMER1 TINT triggers. After executing NMI, it should return to TIMER2 and then service TIMER1.</p>
<p>In this example, the print logs shows the order in which ISR's executed.</p>
<p>GPT can be configured with a counter and pre-scaler divider value. When the GPT is started counter will be decremented to 0. The rate at which this count happens can be controlled by the prescaler divider value. GPT clock is derived by dividing the CPU clock with the pre-scaler divider value.</p>
<p>This test is having two parts. First part of the test verifies whether the GPT is decrementing the counter or not. GPT is configured with a count value 0xFFFF and pre-scaler divider value 256. GPT is started and counter value is read. After few cycles of delay GPT counter value is read again. Both the counter values are compared to verify whether the second count value is less than the first counter value or not.</p>
<p>During second part of the test timer count rate of the GPT is verified. As the GPT clock is derived from the CPU clock based on the pre-scaler value it possible to verify the GPT rate with respect to CPU clock rate. GPT pre-scaler value is set to divide by 4. So the counter runs at a speed that is 1/4th of the CPU clock. Clock at which the CPU is running during the test is calculated using the function getSysClk(). This function returns the value of system clock in KHz. Value of the system clock in KHz represents the CPU clock cycles for one millisecond. GPT count value is set to 1/4th of the CPU clock cycles for one millisecond. With this setup GPT should take one millisecond to count down the counter value to 0. In other way clock cycles executed by the CPU from the time GPT is started to the time counter value reaches 0 should be equal to the number of cycles that are executed by the CPU in one millisecond.GPT is configured to generate interrupt when the count value reaches to 0. GPT is started and the CPU clock cycles are counted in while loop. This loop increments a global variable 'cpuCycleCount' until the GPT generate time-out interrupt. This while loop execution is taking 12 CPU cycles. So the total CPU cycles executed will be 12*cpuCycleCount. At the end of the test this CPU cycles calculated are compared with the CPU clock cycles that will be executed in one millisecond. The calculated CPU cycles can vary ±1% from the actual CPU cycles. If this condition is satisfied GPT is running at the configured rate.</p>
<p>NOTE: THIS TEST HAS BEEN DEVELOPED TO WORK WITH CHIP VERSIONS C5517. MAKE SURE THAT PROPER CHIP VERSION MACRO IS DEFINED IN THE FILE c55xx_csl\inc\csl_general.h.</p>
<h2><a class="anchor" id="GPT2y"></a>
TEST PROCEDURE:</h2>
<ul>
<li>Open the CCS and connect the target (C5517 EVM) </li>
<li>Open the project "CSL_GPT0_Extclk_GPIO0_Example.pjt" and build it </li>
<li>Load the program on to the target </li>
<li>Set the PLL frequency to 100MHz </li>
<li>Repeat the test at PLL frequencies 60MHz, 100MHz, 150MHz and 200MHz </li>
<li>Run the program and observe the test result </li>
<li>Repeat the test in Release mode</li>
</ul>
<h2><a class="anchor" id="GPT2z"></a>
TEST RESULT:</h2>
<ul>
<li>All the CSL APIs should return success </li>
<li>Order of ISR hit of Timers in print log should be correct.</li>
</ul>
<h1><a class="anchor" id="GPT3"></a>
GPT3 EXAMPLE</h1>
<h2><a class="anchor" id="GPT3x"></a>
TEST DESCRIPTION:</h2>
<p>This test code verifies the functionality of the multiple instances of CSL GPT (General Purpose Timer) module. GPT module of C5535/C5515/C5517 DSP is used to provide interrupts to the CPU to schedule periodic tasks or a delayed task. GPT can be configured with a counter and pre-scaler divider value. When the GPT is started counter will be decremented to 0. The rate at which this count happens can be controlled by the prescaler divider value. GPT clock is derived by dividing the CPU clock with the pre-scaler divider value.</p>
<p>This test verifies the multiple instances of the GPT module by checking whether the GTP is decrementing the counter or not. Each instance of the GPT is configured with a count value 0xFFFF and pre-scaler divider value 256. GPT is started and counter value is read. After few cycles of delay GPT counter value is read again. Both the counter values are compared to verify whether the second count value is less than the first counter value or not.</p>
<p>NOTE: THIS TEST HAS BEEN DEVELOPED TO WORK WITH CHIP VERSIONS C5535, C5515 AND C5517. MAKE SURE THAT PROPER CHIP VERSION MACRO IS DEFINED IN THE FILE c55xx_csl\inc\csl_general.h.</p>
<h2><a class="anchor" id="GPT1y"></a>
TEST PROCEDURE:</h2>
<ul>
<li>Open the CCS and connect the target (C5535/C5515 EVM or C5517 EVM)) </li>
<li>Open the project "CSL_GPT_MultiInstances_Example_Out.pjt" and build it </li>
<li>Load the program on to the target </li>
<li>Set the PLL frequency to 12.288MHz </li>
<li>Run the program and observe the test result </li>
<li>Repeat the test at the following PLL frequencies C5515: 60MHz and 100MHz C5517: 60MHz, 100MHz, 150MHz and 200MHz C5535 eZdsp: 60MHz and 100MHz </li>
<li>Repeat the test in Release mode</li>
</ul>
<h2><a class="anchor" id="GPT1z"></a>
TEST RESULT:</h2>
<ul>
<li>All the CSL APIs should return success </li>
<li>Timer count value comparison should be successful </li>
</ul>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Apr 12 2013 15:14:32 for C55XX CSL LP EXAMPLE by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.3.1
</small></address>
</body>
</html>
