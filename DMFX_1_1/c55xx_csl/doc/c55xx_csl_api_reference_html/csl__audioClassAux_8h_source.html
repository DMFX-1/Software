<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>C55XX CSL LP: csl_audioClassAux.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">C55XX CSL LP</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">csl_audioClassAux.h</div>  </div>
</div>
<div class="contents">
<a href="csl__audioClassAux_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/* ============================================================================</span>
<a name="l00002"></a>00002 <span class="comment"> * Copyright (c) 2008-2012 Texas Instruments Incorporated.</span>
<a name="l00003"></a>00003 <span class="comment"> * Except for those rights granted to you in your license from TI, all rights</span>
<a name="l00004"></a>00004 <span class="comment"> * reserved.</span>
<a name="l00005"></a>00005 <span class="comment"> *</span>
<a name="l00006"></a>00006 <span class="comment"> * Software License Agreement</span>
<a name="l00007"></a>00007 <span class="comment"> * Texas Instruments (TI) is supplying this software for use solely and</span>
<a name="l00008"></a>00008 <span class="comment"> * exclusively on TI devices. The software is owned by TI and/or its suppliers,</span>
<a name="l00009"></a>00009 <span class="comment"> * and is protected under applicable patent and copyright laws.  You may not</span>
<a name="l00010"></a>00010 <span class="comment"> * combine this software with any open-source software if such combination would</span>
<a name="l00011"></a>00011 <span class="comment"> * cause this software to become subject to any of the license terms applicable</span>
<a name="l00012"></a>00012 <span class="comment"> * to such open source software.</span>
<a name="l00013"></a>00013 <span class="comment"> *</span>
<a name="l00014"></a>00014 <span class="comment"> * THIS SOFTWARE IS PROVIDED &quot;AS IS&quot; AND WITH ALL FAULTS.</span>
<a name="l00015"></a>00015 <span class="comment"> * NO WARRANTIES APPLY TO THIS SOFTWARE, WHETHER EXPRESS, IMPLIED OR STATUTORY.</span>
<a name="l00016"></a>00016 <span class="comment"> * EXAMPLES OF EXCLUDED WARRANTIES ARE IMPLIED WARRANTIES OF MERCHANTABILITY</span>
<a name="l00017"></a>00017 <span class="comment"> * AND FITNESS FOR A PARTICULAR PURPOSE AND WARRANTIES OF NON-INFRINGEMENT,</span>
<a name="l00018"></a>00018 <span class="comment"> * BUT ALL OTHER WARRANTY EXCLUSIONS ALSO APPLY. FURTHERMORE, TI SHALL NOT,</span>
<a name="l00019"></a>00019 <span class="comment"> * UNDER ANY CIRCUMSTANCES, BE LIABLE FOR SPECIAL, INCIDENTAL, CONSEQUENTIAL</span>
<a name="l00020"></a>00020 <span class="comment"> * OR PUNITIVE DAMAGES, FOR ANY REASON WHATSOEVER.</span>
<a name="l00021"></a>00021 <span class="comment"> * ============================================================================</span>
<a name="l00022"></a>00022 <span class="comment"> */</span>
<a name="l00023"></a>00023 
<a name="l00031"></a>00031 <span class="comment">/* ============================================================================</span>
<a name="l00032"></a>00032 <span class="comment"> * Revision History</span>
<a name="l00033"></a>00033 <span class="comment"> * ================</span>
<a name="l00034"></a>00034 <span class="comment"> * 10-Dec-2008 Created</span>
<a name="l00035"></a>00035 <span class="comment"> * 21-Jan-2009 Modified for code review comments</span>
<a name="l00036"></a>00036 <span class="comment"> * 13-Aug-2010 CSL v2.10 release</span>
<a name="l00037"></a>00037 <span class="comment"> * 06-Jul-2011 CSL v2.50 release</span>
<a name="l00038"></a>00038 <span class="comment"> * 13-Sep-2012 CSL v3.00 release</span>
<a name="l00039"></a>00039 <span class="comment"> * 20-Dec-2012 CSL v3.01 release</span>
<a name="l00040"></a>00040 <span class="comment"> * ============================================================================</span>
<a name="l00041"></a>00041 <span class="comment"> */</span>
<a name="l00042"></a>00042 
<a name="l00043"></a>00043 <span class="preprocessor">#ifndef _CSL_AUDIOCLASSAUX_H_</span>
<a name="l00044"></a>00044 <span class="preprocessor"></span><span class="preprocessor">#define _CSL_AUDIOCLASSAUX_H_</span>
<a name="l00045"></a>00045 <span class="preprocessor"></span>
<a name="l00046"></a>00046 <span class="preprocessor">#ifdef __cplusplus</span>
<a name="l00047"></a>00047 <span class="preprocessor"></span><span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {
<a name="l00048"></a>00048 <span class="preprocessor">#endif</span>
<a name="l00049"></a>00049 <span class="preprocessor"></span>
<a name="l00050"></a>00050 <span class="preprocessor">#include &quot;<a class="code" href="csl__usbAux_8h.html" title="USB MUSB functional layer Auxiliary header file.">csl_usbAux.h</a>&quot;</span>
<a name="l00051"></a>00051 <span class="preprocessor">#include &quot;<a class="code" href="csl__audioClass_8h.html" title="USB Audio Class functional layer API header file.">csl_audioClass.h</a>&quot;</span>
<a name="l00052"></a>00052 
<a name="l00110"></a>00110 <span class="keyword">static</span> <span class="keyword">inline</span>
<a name="l00111"></a><a class="code" href="group__CSL__AC__FUNCTION.html#gaf0d646967dd4dd4b7e915b7e5fb12fc9">00111</a> <a class="code" href="group__CSL__AC__ENUM.html#ga96d9d570b52f08fac1ac8f79109af276" title="This Enum defines the Audio request return values.">CSL_AcRequestRet</a> <a class="code" href="group__CSL__AC__FUNCTION.html#gaf0d646967dd4dd4b7e915b7e5fb12fc9">AC_reqUnknown</a>(<a class="code" href="structCSL__UsbContext.html" title="USB context information structure.">CSL_UsbDevHandle</a>      devHandle,
<a name="l00112"></a>00112                                <a class="code" href="structCSL__UsbSetupStruct.html" title="Data structure to hold USB setup packet.">CSL_UsbSetupStruct</a>    *usbSetup,
<a name="l00113"></a>00113                                <a class="code" href="structCSL__UsbEpObj.html" title="Data Structure for USB Endpoint Object.">CSL_UsbEpHandle</a>       hInEp,
<a name="l00114"></a>00114                                <a class="code" href="structCSL__UsbEpObj.html" title="Data Structure for USB Endpoint Object.">CSL_UsbEpHandle</a>       hOutEp,
<a name="l00115"></a>00115                                <span class="keywordtype">void</span>                  *pAcObj)
<a name="l00116"></a>00116 {
<a name="l00117"></a>00117     <a class="code" href="group__CSL__AC__ENUM.html#ga96d9d570b52f08fac1ac8f79109af276" title="This Enum defines the Audio request return values.">CSL_AcRequestRet</a>    retStat;
<a name="l00118"></a>00118 
<a name="l00119"></a>00119     <span class="comment">/* STALL the endpoint - the request is either not known or not supported */</span>
<a name="l00120"></a>00120     retStat = CSL_AC_REQUEST_STALL;
<a name="l00121"></a>00121 
<a name="l00122"></a>00122     <span class="keywordflow">return</span>(retStat);
<a name="l00123"></a>00123 }
<a name="l00124"></a>00124 
<a name="l00175"></a>00175 <span class="keyword">static</span> <span class="keyword">inline</span>
<a name="l00176"></a><a class="code" href="group__CSL__AC__FUNCTION.html#gac82f21eadcd498a4368b7fa1888e5f3d">00176</a> <a class="code" href="group__CSL__AC__DATASTRUCT.html#ga595dae9cc4d01d8d1b2cd193b9f5340d" title="Audio Class request handler function pointer.">fpAC_REQ_HANDLER</a> <a class="code" href="group__CSL__AC__FUNCTION.html#gac82f21eadcd498a4368b7fa1888e5f3d">AC_lookupReqHandler</a>(Uint16                 request,
<a name="l00177"></a>00177                                      <a class="code" href="structCSL__AcRequestStruct.html" title="Audio Class control request structure.">CSL_AcRequestStruct</a>    *pUSB_ReqTable)
<a name="l00178"></a>00178 {
<a name="l00179"></a>00179     Uint16    index;
<a name="l00180"></a>00180 
<a name="l00181"></a>00181     <span class="comment">/* parse thru the end of request handler table */</span>
<a name="l00182"></a>00182     <span class="keywordflow">for</span>(index = 0; pUSB_ReqTable[index].<a class="code" href="structCSL__AcRequestStruct.html#a19c68d3f6821baf44c0ba21bd3741e77" title="AC control request handler pointer.">fpRequestHandler</a> != NULL; index++)
<a name="l00183"></a>00183     {
<a name="l00184"></a>00184         <span class="comment">/* if request handler exists return a pointer to the request handler routine */</span>
<a name="l00185"></a>00185         <span class="keywordflow">if</span>(pUSB_ReqTable[index].request == request)
<a name="l00186"></a>00186         {
<a name="l00187"></a>00187             <span class="keywordflow">return</span>(pUSB_ReqTable[index].fpRequestHandler);
<a name="l00188"></a>00188         }
<a name="l00189"></a>00189     }
<a name="l00190"></a>00190 
<a name="l00191"></a>00191     <span class="comment">/* if request handler does not exist return a pointer to the USB_reqUnknown</span>
<a name="l00192"></a>00192 <span class="comment">    routine */</span>
<a name="l00193"></a>00193     <span class="keywordflow">return</span>(<a class="code" href="group__CSL__AC__FUNCTION.html#gaf0d646967dd4dd4b7e915b7e5fb12fc9">AC_reqUnknown</a>);
<a name="l00194"></a>00194 }
<a name="l00195"></a>00195 
<a name="l00249"></a>00249 <span class="keyword">static</span> <span class="keyword">inline</span>
<a name="l00250"></a><a class="code" href="group__CSL__AC__FUNCTION.html#ga704f5df35c5e743528bbbd0454b9ac21">00250</a> <a class="code" href="group__CSL__AC__ENUM.html#ga96d9d570b52f08fac1ac8f79109af276" title="This Enum defines the Audio request return values.">CSL_AcRequestRet</a> <a class="code" href="group__CSL__AC__FUNCTION.html#ga704f5df35c5e743528bbbd0454b9ac21">AC_reqSetAddress</a>(<a class="code" href="structCSL__UsbContext.html" title="USB context information structure.">CSL_UsbDevHandle</a>      devHandle,
<a name="l00251"></a>00251                                   <a class="code" href="structCSL__UsbSetupStruct.html" title="Data structure to hold USB setup packet.">CSL_UsbSetupStruct</a>    *usbSetup,
<a name="l00252"></a>00252                                   <a class="code" href="structCSL__UsbEpObj.html" title="Data Structure for USB Endpoint Object.">CSL_UsbEpHandle</a>       hInEp,
<a name="l00253"></a>00253                                   <a class="code" href="structCSL__UsbEpObj.html" title="Data Structure for USB Endpoint Object.">CSL_UsbEpHandle</a>       hOutEp,
<a name="l00254"></a>00254                                   <span class="keywordtype">void</span>                  *pAcObj)
<a name="l00255"></a>00255 {
<a name="l00256"></a>00256     <a class="code" href="group__CSL__USB__FUNCTION.html#ga25cb72d6bce692e49d554479df7c9173">USB_setDevAddr</a>(devHandle, (Uint16)(usbSetup-&gt;<a class="code" href="structCSL__UsbSetupStruct.html#a20b94e0080d670cfd371b622838f24a7" title="Byte 2 and 3 of setup packet.">wValue</a>));
<a name="l00257"></a>00257 
<a name="l00258"></a>00258     <span class="keywordflow">return</span>(CSL_AC_REQUEST_DONE);
<a name="l00259"></a>00259 }
<a name="l00260"></a>00260 
<a name="l00315"></a>00315 <span class="keyword">static</span> <span class="keyword">inline</span>
<a name="l00316"></a><a class="code" href="group__CSL__AC__FUNCTION.html#ga94ca6516fea56774c937e7719e72c827">00316</a> <a class="code" href="group__CSL__AC__ENUM.html#ga96d9d570b52f08fac1ac8f79109af276" title="This Enum defines the Audio request return values.">CSL_AcRequestRet</a> <a class="code" href="group__CSL__AC__FUNCTION.html#ga94ca6516fea56774c937e7719e72c827">AC_reqSetConfiguration</a>(<a class="code" href="structCSL__UsbContext.html" title="USB context information structure.">CSL_UsbDevHandle</a>      devHandle,
<a name="l00317"></a>00317                                         <a class="code" href="structCSL__UsbSetupStruct.html" title="Data structure to hold USB setup packet.">CSL_UsbSetupStruct</a>    *usbSetup,
<a name="l00318"></a>00318                                         <a class="code" href="structCSL__UsbEpObj.html" title="Data Structure for USB Endpoint Object.">CSL_UsbEpHandle</a>       hInEp,
<a name="l00319"></a>00319                                         <a class="code" href="structCSL__UsbEpObj.html" title="Data Structure for USB Endpoint Object.">CSL_UsbEpHandle</a>       hOutEp,
<a name="l00320"></a>00320                                         <span class="keywordtype">void</span>                  *pAcObj)
<a name="l00321"></a>00321 {
<a name="l00322"></a>00322     <a class="code" href="group__CSL__AC__ENUM.html#ga96d9d570b52f08fac1ac8f79109af276" title="This Enum defines the Audio request return values.">CSL_AcRequestRet</a>    retStat;
<a name="l00323"></a>00323 
<a name="l00324"></a>00324     <a class="code" href="structCSL__AcClassStruct.html" title="AC Control Object structure.">pAcClassHandle</a>      pAcClassHdl;
<a name="l00325"></a>00325     <a class="code" href="structCSL__AcCtrlObject.html" title="USB AC Control Object structure.">CSL_AcCtrlObject</a>    *pCtrlHandle;
<a name="l00326"></a>00326 
<a name="l00327"></a>00327     pAcClassHdl = (<a class="code" href="group__CSL__AC__DATASTRUCT.html#ga8fc85595df27054f7e846cf80f893ffc" title="Audio Class class handle.">pAcClassHandle</a>)(pAcObj);
<a name="l00328"></a>00328     pCtrlHandle  = &amp;pAcClassHdl-&gt;<a class="code" href="structCSL__AcClassStruct.html#a9bb526f1e538af0e9437e94cb64a932b" title="Handle to Control Object.">ctrlHandle</a>;
<a name="l00329"></a>00329 
<a name="l00330"></a>00330     <span class="keywordflow">if</span>((usbSetup-&gt;<a class="code" href="structCSL__UsbSetupStruct.html#a20b94e0080d670cfd371b622838f24a7" title="Byte 2 and 3 of setup packet.">wValue</a> == FALSE) || (usbSetup-&gt;<a class="code" href="structCSL__UsbSetupStruct.html#a20b94e0080d670cfd371b622838f24a7" title="Byte 2 and 3 of setup packet.">wValue</a> == TRUE))
<a name="l00331"></a>00331     {
<a name="l00332"></a>00332         pCtrlHandle-&gt;<a class="code" href="structCSL__AcCtrlObject.html#a49819379d39dc52417677c05ef0bcfd5" title="Current Device Configuration Status.">curConfigStat</a> = usbSetup-&gt;<a class="code" href="structCSL__UsbSetupStruct.html#a20b94e0080d670cfd371b622838f24a7" title="Byte 2 and 3 of setup packet.">wValue</a>;
<a name="l00333"></a>00333 
<a name="l00334"></a>00334         <a class="code" href="group__CSL__USB__FUNCTION.html#ga2afe1be9825d404c775e8570b85338c2">USB_setConfiguration</a>(devHandle, usbSetup-&gt;<a class="code" href="structCSL__UsbSetupStruct.html#a20b94e0080d670cfd371b622838f24a7" title="Byte 2 and 3 of setup packet.">wValue</a>);
<a name="l00335"></a>00335 
<a name="l00336"></a>00336         retStat   = CSL_AC_REQUEST_SEND_ACK;
<a name="l00337"></a>00337     }
<a name="l00338"></a>00338     <span class="keywordflow">else</span>
<a name="l00339"></a>00339     {
<a name="l00340"></a>00340         <span class="comment">/* configuration not supported, STALL the endpoint */</span>
<a name="l00341"></a>00341         retStat = CSL_AC_REQUEST_STALL;
<a name="l00342"></a>00342     }
<a name="l00343"></a>00343 
<a name="l00344"></a>00344     <span class="keywordflow">return</span>(retStat);
<a name="l00345"></a>00345 }
<a name="l00346"></a>00346 
<a name="l00401"></a>00401 <span class="keyword">static</span> <span class="keyword">inline</span>
<a name="l00402"></a><a class="code" href="group__CSL__AC__FUNCTION.html#gafd88f11be6f4a4df6adf684900374f21">00402</a> <a class="code" href="group__CSL__AC__ENUM.html#ga96d9d570b52f08fac1ac8f79109af276" title="This Enum defines the Audio request return values.">CSL_AcRequestRet</a> <a class="code" href="group__CSL__AC__FUNCTION.html#gafd88f11be6f4a4df6adf684900374f21">AC_reqClearFeature</a>(<a class="code" href="structCSL__UsbContext.html" title="USB context information structure.">CSL_UsbDevHandle</a>      devHandle,
<a name="l00403"></a>00403                                     <a class="code" href="structCSL__UsbSetupStruct.html" title="Data structure to hold USB setup packet.">CSL_UsbSetupStruct</a>    *usbSetup,
<a name="l00404"></a>00404                                     <a class="code" href="structCSL__UsbEpObj.html" title="Data Structure for USB Endpoint Object.">CSL_UsbEpHandle</a>       hInEp,
<a name="l00405"></a>00405                                     <a class="code" href="structCSL__UsbEpObj.html" title="Data Structure for USB Endpoint Object.">CSL_UsbEpHandle</a>       hOutEp,
<a name="l00406"></a>00406                                     <span class="keywordtype">void</span>                  *pAcObj)
<a name="l00407"></a>00407 {
<a name="l00408"></a>00408     <a class="code" href="group__CSL__AC__ENUM.html#ga96d9d570b52f08fac1ac8f79109af276" title="This Enum defines the Audio request return values.">CSL_AcRequestRet</a>    retStat;
<a name="l00409"></a>00409     <a class="code" href="structCSL__UsbEpObj.html" title="Data Structure for USB Endpoint Object.">CSL_UsbEpHandle</a>     hEPx;
<a name="l00410"></a>00410     Uint16              endpt;  <span class="comment">/* this is USB logical endpoint */</span>
<a name="l00411"></a>00411 
<a name="l00412"></a>00412     retStat = CSL_AC_REQUEST_SEND_ACK;
<a name="l00413"></a>00413 
<a name="l00414"></a>00414     <span class="keywordflow">switch</span>(usbSetup-&gt;<a class="code" href="structCSL__UsbSetupStruct.html#a20b94e0080d670cfd371b622838f24a7" title="Byte 2 and 3 of setup packet.">wValue</a>)
<a name="l00415"></a>00415     {
<a name="l00416"></a>00416         <span class="keywordflow">case</span> <a class="code" href="group__CSL__USB__SYMBOL.html#ga27953368972bacf018d289d44dc0198a" title="USB End point Stall Feature.">CSL_USB_FEATURE_ENDPOINT_STALL</a>:
<a name="l00417"></a>00417             endpt = (usbSetup-&gt;<a class="code" href="structCSL__UsbSetupStruct.html#a3dae40396cdd9c4d62e7e1a017d94774" title="Byte 4 and 5 setup packet.">wIndex</a>) &amp; <a class="code" href="group__CSL__AC__SYMBOL.html#gaf6454de99b3add30f24ed9385316959a">CSL_AC_8BIT_MASK</a>;
<a name="l00418"></a>00418             hEPx = <a class="code" href="group__CSL__USB__FUNCTION.html#ga8a8cddf9f5bb46860bcb0177910d438b">USB_epNumToHandle</a>(devHandle, endpt);
<a name="l00419"></a>00419             <a class="code" href="group__CSL__USB__FUNCTION.html#gaa9238a073828f83b3fc474f183d53677">USB_clearEndptStall</a>(hEPx);
<a name="l00420"></a>00420             <span class="keywordflow">break</span>;
<a name="l00421"></a>00421 
<a name="l00422"></a>00422         <span class="keywordflow">case</span> <a class="code" href="group__CSL__USB__SYMBOL.html#ga53ba9c525cb99ee2fef80c60786a69ab" title="USB Remote Wakeup Feature.">CSL_USB_FEATURE_REMOTE_WAKEUP</a>:
<a name="l00423"></a>00423             <a class="code" href="group__CSL__USB__FUNCTION.html#ga697ac4bdefb5d3c8cbd3bcead1e0b23b">USB_setRemoteWakeup</a>(devHandle, (<a class="code" href="group__CSL__USB__ENUM.html#ga5d102397ad06d902df565f3a4ecc2a91" title="This enum defines status return values of USB.">CSL_UsbBoolean</a>)FALSE);
<a name="l00424"></a>00424             <span class="keywordflow">break</span>;
<a name="l00425"></a>00425 
<a name="l00426"></a>00426         <span class="keywordflow">default</span>:
<a name="l00427"></a>00427             <span class="comment">/* Unsupported Feature. STALL the endpoint */</span>
<a name="l00428"></a>00428             retStat = CSL_AC_REQUEST_STALL;
<a name="l00429"></a>00429             <span class="keywordflow">break</span>;
<a name="l00430"></a>00430     }
<a name="l00431"></a>00431 
<a name="l00432"></a>00432     <span class="keywordflow">return</span>(retStat);
<a name="l00433"></a>00433 }
<a name="l00434"></a>00434 
<a name="l00489"></a>00489 <span class="keyword">static</span> <span class="keyword">inline</span>
<a name="l00490"></a><a class="code" href="group__CSL__AC__FUNCTION.html#ga9a8bc1b593ae63a89fa2b788f35c11ca">00490</a> <a class="code" href="group__CSL__AC__ENUM.html#ga96d9d570b52f08fac1ac8f79109af276" title="This Enum defines the Audio request return values.">CSL_AcRequestRet</a> <a class="code" href="group__CSL__AC__FUNCTION.html#ga9a8bc1b593ae63a89fa2b788f35c11ca">AC_reqGetStatus</a>(<a class="code" href="structCSL__UsbContext.html" title="USB context information structure.">CSL_UsbDevHandle</a>      devHandle,
<a name="l00491"></a>00491                                  <a class="code" href="structCSL__UsbSetupStruct.html" title="Data structure to hold USB setup packet.">CSL_UsbSetupStruct</a>    *usbSetup,
<a name="l00492"></a>00492                                  <a class="code" href="structCSL__UsbEpObj.html" title="Data Structure for USB Endpoint Object.">CSL_UsbEpHandle</a>       hInEp,
<a name="l00493"></a>00493                                  <a class="code" href="structCSL__UsbEpObj.html" title="Data Structure for USB Endpoint Object.">CSL_UsbEpHandle</a>       hOutEp,
<a name="l00494"></a>00494                                  <span class="keywordtype">void</span>                  *pAcObj)
<a name="l00495"></a>00495 {
<a name="l00496"></a>00496     <a class="code" href="group__CSL__AC__ENUM.html#ga96d9d570b52f08fac1ac8f79109af276" title="This Enum defines the Audio request return values.">CSL_AcRequestRet</a>     retStat;
<a name="l00497"></a>00497     <a class="code" href="structCSL__AcClassStruct.html" title="AC Control Object structure.">pAcClassHandle</a>       pAcClassHdl;
<a name="l00498"></a>00498     <a class="code" href="structCSL__AcCtrlObject.html" title="USB AC Control Object structure.">CSL_AcCtrlObject</a>     *pCtrlHandle;
<a name="l00499"></a>00499     <a class="code" href="structCSL__UsbEpObj.html" title="Data Structure for USB Endpoint Object.">CSL_UsbEpHandle</a>      hEPx;
<a name="l00500"></a>00500     CSL_Status           status;
<a name="l00501"></a>00501     Uint16               endpt;   <span class="comment">/* this is USB logical endpoint */</span>
<a name="l00502"></a>00502 
<a name="l00503"></a>00503     pAcClassHdl = (<a class="code" href="group__CSL__AC__DATASTRUCT.html#ga8fc85595df27054f7e846cf80f893ffc" title="Audio Class class handle.">pAcClassHandle</a>)(pAcObj);
<a name="l00504"></a>00504     pCtrlHandle  = &amp;pAcClassHdl-&gt;<a class="code" href="structCSL__AcClassStruct.html#a9bb526f1e538af0e9437e94cb64a932b" title="Handle to Control Object.">ctrlHandle</a>;
<a name="l00505"></a>00505     retStat      = CSL_AC_REQUEST_GET_ACK;
<a name="l00506"></a>00506 
<a name="l00507"></a>00507     <span class="keywordflow">switch</span>(usbSetup-&gt;<a class="code" href="structCSL__UsbSetupStruct.html#a78d44b3f43dbe57fe6e94c4c8014cbf3" title="Byte 0 of setup packet.">bmRequestType</a> - <a class="code" href="group__CSL__AC__SYMBOL.html#gaf9a0cba4448ac53ef0e7b61f0b9fa03f">CSL_AC_REQUEST_TYPE_BASE</a>)
<a name="l00508"></a>00508     {
<a name="l00509"></a>00509         <span class="comment">/* Device Status to be returned */</span>
<a name="l00510"></a>00510         <span class="keywordflow">case</span> <a class="code" href="group__CSL__AC__SYMBOL.html#ga36ebd1b298683c99a779ce12e907d92b">CSL_AC_REQUEST_TYPE_DEVICE_STATUS</a>:
<a name="l00511"></a>00511             pCtrlHandle-&gt;<a class="code" href="structCSL__AcCtrlObject.html#a5955e5cb802d96a8bf41ed29562879fc" title="Array used for General Purpose.">ctrlBuffer</a>[1] =
<a name="l00512"></a>00512             (((Uint16)<a class="code" href="group__CSL__USB__FUNCTION.html#ga3a1737f1a1f76b2cd16120376ba777a1">USB_getRemoteWakeupStat</a>(devHandle))&lt;&lt;1) |
<a name="l00513"></a>00513              <a class="code" href="group__CSL__AC__SYMBOL.html#gabc01c7a0d186eb4c4fb4297ef55f8673">CSL_AC_CURRDEV_STAT</a>;
<a name="l00514"></a>00514             <a class="code" href="group__CSL__USB__FUNCTION.html#ga0976835f84a5fedd800c643e6c86703e">USB_postTransaction</a>(hInEp, 2, &amp;pCtrlHandle-&gt;<a class="code" href="structCSL__AcCtrlObject.html#a5955e5cb802d96a8bf41ed29562879fc" title="Array used for General Purpose.">ctrlBuffer</a>,
<a name="l00515"></a>00515                                 <a class="code" href="group__CSL__USB__SYMBOL.html#ga7bd2d646e37049bcdf340f27ca927e29" title="USB IO Flags.">CSL_USB_IOFLAG_NONE</a>);
<a name="l00516"></a>00516             <span class="keywordflow">break</span>;
<a name="l00517"></a>00517 
<a name="l00518"></a>00518         <span class="comment">/* Interface status is to be returned */</span>
<a name="l00519"></a>00519         <span class="keywordflow">case</span> <a class="code" href="group__CSL__AC__SYMBOL.html#gaade34bc152a74364ce725bdbd887a439">CSL_AC_REQUEST_TYPE_INTERFACE_STATUS</a>:
<a name="l00520"></a>00520             pCtrlHandle-&gt;<a class="code" href="structCSL__AcCtrlObject.html#a5955e5cb802d96a8bf41ed29562879fc" title="Array used for General Purpose.">ctrlBuffer</a>[1] = <a class="code" href="group__CSL__AC__SYMBOL.html#gabc01c7a0d186eb4c4fb4297ef55f8673">CSL_AC_CURRDEV_STAT</a>;
<a name="l00521"></a>00521             <a class="code" href="group__CSL__USB__FUNCTION.html#ga0976835f84a5fedd800c643e6c86703e">USB_postTransaction</a>(hInEp, 2, &amp;pCtrlHandle-&gt;<a class="code" href="structCSL__AcCtrlObject.html#a5955e5cb802d96a8bf41ed29562879fc" title="Array used for General Purpose.">ctrlBuffer</a>,
<a name="l00522"></a>00522                                 <a class="code" href="group__CSL__USB__SYMBOL.html#ga7bd2d646e37049bcdf340f27ca927e29" title="USB IO Flags.">CSL_USB_IOFLAG_NONE</a>);
<a name="l00523"></a>00523             <span class="keywordflow">break</span>;
<a name="l00524"></a>00524 
<a name="l00525"></a>00525         <span class="comment">/* Endpoint status to be returned */</span>
<a name="l00526"></a>00526         <span class="keywordflow">case</span> <a class="code" href="group__CSL__AC__SYMBOL.html#gae859e35cf0b895ba07ea73fcb36a6240">CSL_AC_REQUEST_TYPE_EP_STATUS</a>:
<a name="l00527"></a>00527 
<a name="l00528"></a>00528             endpt  =  usbSetup-&gt;<a class="code" href="structCSL__UsbSetupStruct.html#a3dae40396cdd9c4d62e7e1a017d94774" title="Byte 4 and 5 setup packet.">wIndex</a> &amp; 0xFF;
<a name="l00529"></a>00529             hEPx   =  <a class="code" href="group__CSL__USB__FUNCTION.html#ga8a8cddf9f5bb46860bcb0177910d438b">USB_epNumToHandle</a>(devHandle, endpt);
<a name="l00530"></a>00530             pCtrlHandle-&gt;<a class="code" href="structCSL__AcCtrlObject.html#a5955e5cb802d96a8bf41ed29562879fc" title="Array used for General Purpose.">ctrlBuffer</a>[1] = (Uint16)<a class="code" href="group__CSL__USB__FUNCTION.html#gadad6e2731853b7b0edeb2fd65dc24fd0">USB_getEndptStall</a>(hEPx,
<a name="l00531"></a>00531                                                                    &amp;status);
<a name="l00532"></a>00532             <a class="code" href="group__CSL__USB__FUNCTION.html#ga0976835f84a5fedd800c643e6c86703e">USB_postTransaction</a>(hInEp, 2, &amp;pCtrlHandle-&gt;<a class="code" href="structCSL__AcCtrlObject.html#a5955e5cb802d96a8bf41ed29562879fc" title="Array used for General Purpose.">ctrlBuffer</a>,
<a name="l00533"></a>00533                                 <a class="code" href="group__CSL__USB__SYMBOL.html#ga7bd2d646e37049bcdf340f27ca927e29" title="USB IO Flags.">CSL_USB_IOFLAG_NONE</a>);
<a name="l00534"></a>00534             <span class="keywordflow">break</span>;
<a name="l00535"></a>00535 
<a name="l00536"></a>00536         <span class="keywordflow">default</span>:
<a name="l00537"></a>00537             <span class="comment">/* STALL the endpoint */</span>
<a name="l00538"></a>00538             retStat = CSL_AC_REQUEST_STALL;
<a name="l00539"></a>00539             <span class="keywordflow">break</span>;
<a name="l00540"></a>00540     }
<a name="l00541"></a>00541 
<a name="l00542"></a>00542     <span class="keywordflow">return</span>(retStat);
<a name="l00543"></a>00543 }
<a name="l00544"></a>00544 
<a name="l00599"></a>00599 <span class="keyword">static</span> <span class="keyword">inline</span>
<a name="l00600"></a><a class="code" href="group__CSL__AC__FUNCTION.html#ga6f843961b00fa217e2d82ad5020d0364">00600</a> <a class="code" href="group__CSL__AC__ENUM.html#ga96d9d570b52f08fac1ac8f79109af276" title="This Enum defines the Audio request return values.">CSL_AcRequestRet</a> <a class="code" href="group__CSL__AC__FUNCTION.html#ga6f843961b00fa217e2d82ad5020d0364">AC_reqSetFeature</a>(<a class="code" href="structCSL__UsbContext.html" title="USB context information structure.">CSL_UsbDevHandle</a>      devHandle,
<a name="l00601"></a>00601                                   <a class="code" href="structCSL__UsbSetupStruct.html" title="Data structure to hold USB setup packet.">CSL_UsbSetupStruct</a>    *usbSetup,
<a name="l00602"></a>00602                                   <a class="code" href="structCSL__UsbEpObj.html" title="Data Structure for USB Endpoint Object.">CSL_UsbEpHandle</a>       hInEp,
<a name="l00603"></a>00603                                   <a class="code" href="structCSL__UsbEpObj.html" title="Data Structure for USB Endpoint Object.">CSL_UsbEpHandle</a>       hOutEp,
<a name="l00604"></a>00604                                   <span class="keywordtype">void</span>                  *pAcObj)
<a name="l00605"></a>00605 {
<a name="l00606"></a>00606     <a class="code" href="group__CSL__AC__ENUM.html#ga96d9d570b52f08fac1ac8f79109af276" title="This Enum defines the Audio request return values.">CSL_AcRequestRet</a>    retStat;
<a name="l00607"></a>00607     <a class="code" href="structCSL__UsbEpObj.html" title="Data Structure for USB Endpoint Object.">CSL_UsbEpHandle</a>     hEPx;
<a name="l00608"></a>00608     Uint16              endpt;        <span class="comment">/* this is USB logical endpoint */</span>
<a name="l00609"></a>00609 
<a name="l00610"></a>00610     retStat = CSL_AC_REQUEST_SEND_ACK;
<a name="l00611"></a>00611 
<a name="l00612"></a>00612     <span class="keywordflow">switch</span>(usbSetup-&gt;<a class="code" href="structCSL__UsbSetupStruct.html#a20b94e0080d670cfd371b622838f24a7" title="Byte 2 and 3 of setup packet.">wValue</a>)
<a name="l00613"></a>00613     {
<a name="l00614"></a>00614         <span class="keywordflow">case</span> <a class="code" href="group__CSL__USB__SYMBOL.html#ga27953368972bacf018d289d44dc0198a" title="USB End point Stall Feature.">CSL_USB_FEATURE_ENDPOINT_STALL</a>:
<a name="l00615"></a>00615             <span class="comment">/* updated set and clear endpoint stall to work with logical endpoint num */</span>
<a name="l00616"></a>00616             endpt = (usbSetup-&gt;<a class="code" href="structCSL__UsbSetupStruct.html#a3dae40396cdd9c4d62e7e1a017d94774" title="Byte 4 and 5 setup packet.">wIndex</a>) &amp; <a class="code" href="group__CSL__AC__SYMBOL.html#gaf6454de99b3add30f24ed9385316959a">CSL_AC_8BIT_MASK</a>;
<a name="l00617"></a>00617             hEPx = <a class="code" href="group__CSL__USB__FUNCTION.html#ga8a8cddf9f5bb46860bcb0177910d438b">USB_epNumToHandle</a>(devHandle, endpt);
<a name="l00618"></a>00618             <a class="code" href="group__CSL__USB__FUNCTION.html#gaa1befea5ae93ae7079e52df923a54c21">USB_stallEndpt</a>(hEPx);
<a name="l00619"></a>00619             <span class="keywordflow">break</span>;
<a name="l00620"></a>00620 
<a name="l00621"></a>00621         <span class="keywordflow">case</span> <a class="code" href="group__CSL__USB__SYMBOL.html#ga53ba9c525cb99ee2fef80c60786a69ab" title="USB Remote Wakeup Feature.">CSL_USB_FEATURE_REMOTE_WAKEUP</a>:
<a name="l00622"></a>00622             <a class="code" href="group__CSL__USB__FUNCTION.html#ga697ac4bdefb5d3c8cbd3bcead1e0b23b">USB_setRemoteWakeup</a>(devHandle, (<a class="code" href="group__CSL__USB__ENUM.html#ga5d102397ad06d902df565f3a4ecc2a91" title="This enum defines status return values of USB.">CSL_UsbBoolean</a>)TRUE);
<a name="l00623"></a>00623             <span class="keywordflow">break</span>;
<a name="l00624"></a>00624 
<a name="l00625"></a>00625         <span class="keywordflow">default</span>:
<a name="l00626"></a>00626             <span class="comment">/* Feature not supported, STALL the endpoint */</span>
<a name="l00627"></a>00627             retStat = CSL_AC_REQUEST_STALL;
<a name="l00628"></a>00628             <span class="keywordflow">break</span>;
<a name="l00629"></a>00629     }
<a name="l00630"></a>00630 
<a name="l00631"></a>00631   <span class="keywordflow">return</span>(retStat);
<a name="l00632"></a>00632 }
<a name="l00633"></a>00633 
<a name="l00687"></a>00687 <span class="keyword">static</span> <span class="keyword">inline</span>
<a name="l00688"></a><a class="code" href="group__CSL__AC__FUNCTION.html#ga72b8feae60ffb2e627f5c63f289932fa">00688</a> <a class="code" href="group__CSL__AC__ENUM.html#ga96d9d570b52f08fac1ac8f79109af276" title="This Enum defines the Audio request return values.">CSL_AcRequestRet</a> <a class="code" href="group__CSL__AC__FUNCTION.html#ga72b8feae60ffb2e627f5c63f289932fa">AC_reqGetConfiguration</a>(<a class="code" href="structCSL__UsbContext.html" title="USB context information structure.">CSL_UsbDevHandle</a>      devHandle,
<a name="l00689"></a>00689                                         <a class="code" href="structCSL__UsbSetupStruct.html" title="Data structure to hold USB setup packet.">CSL_UsbSetupStruct</a>    *usbSetup,
<a name="l00690"></a>00690                                         <a class="code" href="structCSL__UsbEpObj.html" title="Data Structure for USB Endpoint Object.">CSL_UsbEpHandle</a>       hInEp,
<a name="l00691"></a>00691                                         <a class="code" href="structCSL__UsbEpObj.html" title="Data Structure for USB Endpoint Object.">CSL_UsbEpHandle</a>       hOutEp,
<a name="l00692"></a>00692                                         <span class="keywordtype">void</span>                  *pAcObj)
<a name="l00693"></a>00693 {
<a name="l00694"></a>00694     <a class="code" href="structCSL__AcClassStruct.html" title="AC Control Object structure.">pAcClassHandle</a>       pAcClassHdl;
<a name="l00695"></a>00695     <a class="code" href="structCSL__AcCtrlObject.html" title="USB AC Control Object structure.">CSL_AcCtrlObject</a>*    pCtrlHandle;
<a name="l00696"></a>00696 
<a name="l00697"></a>00697     pAcClassHdl = (<a class="code" href="group__CSL__AC__DATASTRUCT.html#ga8fc85595df27054f7e846cf80f893ffc" title="Audio Class class handle.">pAcClassHandle</a>)(pAcObj);
<a name="l00698"></a>00698     pCtrlHandle  = &amp;pAcClassHdl-&gt;<a class="code" href="structCSL__AcClassStruct.html#a9bb526f1e538af0e9437e94cb64a932b" title="Handle to Control Object.">ctrlHandle</a>;
<a name="l00699"></a>00699 
<a name="l00700"></a>00700     <span class="comment">/* Send the current Configuration Value */</span>
<a name="l00701"></a>00701     pCtrlHandle-&gt;<a class="code" href="structCSL__AcCtrlObject.html#a5955e5cb802d96a8bf41ed29562879fc" title="Array used for General Purpose.">ctrlBuffer</a>[1] = pCtrlHandle-&gt;<a class="code" href="structCSL__AcCtrlObject.html#a49819379d39dc52417677c05ef0bcfd5" title="Current Device Configuration Status.">curConfigStat</a>;
<a name="l00702"></a>00702     <a class="code" href="group__CSL__USB__FUNCTION.html#ga0976835f84a5fedd800c643e6c86703e">USB_postTransaction</a>(hInEp, 1, (<span class="keywordtype">void</span>*)&amp;pCtrlHandle-&gt;<a class="code" href="structCSL__AcCtrlObject.html#a5955e5cb802d96a8bf41ed29562879fc" title="Array used for General Purpose.">ctrlBuffer</a>,
<a name="l00703"></a>00703                         <a class="code" href="group__CSL__USB__SYMBOL.html#ga7bd2d646e37049bcdf340f27ca927e29" title="USB IO Flags.">CSL_USB_IOFLAG_NONE</a> | <a class="code" href="group__CSL__USB__SYMBOL.html#ga8874c47ae40bc99a01424c1577538a25">CSL_USB_IOFLAG_NOSHORT</a>);
<a name="l00704"></a>00704 
<a name="l00705"></a>00705     <span class="keywordflow">return</span>(CSL_AC_REQUEST_GET_ACK);
<a name="l00706"></a>00706 }
<a name="l00707"></a>00707 
<a name="l00763"></a>00763 <span class="keyword">static</span> <span class="keyword">inline</span>
<a name="l00764"></a><a class="code" href="group__CSL__AC__FUNCTION.html#ga49de7509be688ccdb95c768112835b42">00764</a> <a class="code" href="group__CSL__AC__ENUM.html#ga96d9d570b52f08fac1ac8f79109af276" title="This Enum defines the Audio request return values.">CSL_AcRequestRet</a> <a class="code" href="group__CSL__AC__FUNCTION.html#ga49de7509be688ccdb95c768112835b42">AC_reqGetMaxLUN</a>(<a class="code" href="structCSL__UsbContext.html" title="USB context information structure.">CSL_UsbDevHandle</a>      devHandle,
<a name="l00765"></a>00765                                  <a class="code" href="structCSL__UsbSetupStruct.html" title="Data structure to hold USB setup packet.">CSL_UsbSetupStruct</a>    *usbSetup,
<a name="l00766"></a>00766                                  <a class="code" href="structCSL__UsbEpObj.html" title="Data Structure for USB Endpoint Object.">CSL_UsbEpHandle</a>       hInEp,
<a name="l00767"></a>00767                                  <a class="code" href="structCSL__UsbEpObj.html" title="Data Structure for USB Endpoint Object.">CSL_UsbEpHandle</a>       hOutEp,
<a name="l00768"></a>00768                                  <span class="keywordtype">void</span>                  *pAcObj)
<a name="l00769"></a>00769 {
<a name="l00770"></a>00770     <a class="code" href="structCSL__AcClassStruct.html" title="AC Control Object structure.">pAcClassHandle</a>       pAcClassHdl;
<a name="l00771"></a>00771     <a class="code" href="structCSL__AcCtrlObject.html" title="USB AC Control Object structure.">CSL_AcCtrlObject</a>*    pCtrlHandle;
<a name="l00772"></a>00772     <a class="code" href="group__CSL__AC__ENUM.html#ga96d9d570b52f08fac1ac8f79109af276" title="This Enum defines the Audio request return values.">CSL_AcRequestRet</a>     retStat;
<a name="l00773"></a>00773 
<a name="l00774"></a>00774     pAcClassHdl = (<a class="code" href="group__CSL__AC__DATASTRUCT.html#ga8fc85595df27054f7e846cf80f893ffc" title="Audio Class class handle.">pAcClassHandle</a>)(pAcObj);
<a name="l00775"></a>00775     pCtrlHandle  = &amp;pAcClassHdl-&gt;<a class="code" href="structCSL__AcClassStruct.html#a9bb526f1e538af0e9437e94cb64a932b" title="Handle to Control Object.">ctrlHandle</a>;
<a name="l00776"></a>00776     pCtrlHandle-&gt;<a class="code" href="structCSL__AcCtrlObject.html#a5955e5cb802d96a8bf41ed29562879fc" title="Array used for General Purpose.">ctrlBuffer</a>[1] = pAcClassHdl-&gt;<a class="code" href="structCSL__AcClassStruct.html#a00115100a19fa03539ecb636656ac86c" title="Handle to Iso Transfer Object.">acHandle</a>.<a class="code" href="structCSL__AcObject.html#a1f22837ca641ef8902dc32f0f99204de" title="Maximum No.of Logical Units.">noOfLun</a>;
<a name="l00777"></a>00777 
<a name="l00778"></a>00778     <span class="keywordflow">if</span>(pAcClassHdl-&gt;<a class="code" href="structCSL__AcClassStruct.html#a00115100a19fa03539ecb636656ac86c" title="Handle to Iso Transfer Object.">acHandle</a>.<a class="code" href="structCSL__AcObject.html#a1f22837ca641ef8902dc32f0f99204de" title="Maximum No.of Logical Units.">noOfLun</a> &gt; 0)
<a name="l00779"></a>00779     {
<a name="l00780"></a>00780         <a class="code" href="group__CSL__USB__FUNCTION.html#ga0976835f84a5fedd800c643e6c86703e">USB_postTransaction</a>(hInEp, 1, &amp;pCtrlHandle-&gt;<a class="code" href="structCSL__AcCtrlObject.html#a5955e5cb802d96a8bf41ed29562879fc" title="Array used for General Purpose.">ctrlBuffer</a>[0],
<a name="l00781"></a>00781                             <a class="code" href="group__CSL__USB__SYMBOL.html#ga7bd2d646e37049bcdf340f27ca927e29" title="USB IO Flags.">CSL_USB_IOFLAG_NONE</a>);
<a name="l00782"></a>00782 
<a name="l00783"></a>00783         <span class="comment">/*Receive a 0 length packet for acknowledgement */</span>
<a name="l00784"></a>00784         retStat = CSL_AC_REQUEST_GET_ACK;
<a name="l00785"></a>00785     }
<a name="l00786"></a>00786     <span class="keywordflow">else</span>
<a name="l00787"></a>00787     {
<a name="l00788"></a>00788         retStat = CSL_AC_REQUEST_STALL;
<a name="l00789"></a>00789     }
<a name="l00790"></a>00790 
<a name="l00791"></a>00791     <span class="keywordflow">return</span> (retStat);
<a name="l00792"></a>00792 }
<a name="l00793"></a>00793 
<a name="l00849"></a>00849 <span class="keyword">static</span> <span class="keyword">inline</span>
<a name="l00850"></a><a class="code" href="group__CSL__AC__FUNCTION.html#ga28a08f70e283b7a37f8fc425ce7c7e65">00850</a> <a class="code" href="group__CSL__AC__ENUM.html#ga96d9d570b52f08fac1ac8f79109af276" title="This Enum defines the Audio request return values.">CSL_AcRequestRet</a> <a class="code" href="group__CSL__AC__FUNCTION.html#ga28a08f70e283b7a37f8fc425ce7c7e65">AC_reqGetInterface</a>(<a class="code" href="structCSL__UsbContext.html" title="USB context information structure.">CSL_UsbDevHandle</a>      devHandle,
<a name="l00851"></a>00851                                     <a class="code" href="structCSL__UsbSetupStruct.html" title="Data structure to hold USB setup packet.">CSL_UsbSetupStruct</a>    *usbSetup,
<a name="l00852"></a>00852                                     <a class="code" href="structCSL__UsbEpObj.html" title="Data Structure for USB Endpoint Object.">CSL_UsbEpHandle</a>       hInEp,
<a name="l00853"></a>00853                                     <a class="code" href="structCSL__UsbEpObj.html" title="Data Structure for USB Endpoint Object.">CSL_UsbEpHandle</a>       hOutEp,
<a name="l00854"></a>00854                                     <span class="keywordtype">void</span>                  *pAcObj)
<a name="l00855"></a>00855 {
<a name="l00856"></a>00856     <a class="code" href="structCSL__AcClassStruct.html" title="AC Control Object structure.">pAcClassHandle</a>       pAcClassHdl;
<a name="l00857"></a>00857     <a class="code" href="structCSL__AcCtrlObject.html" title="USB AC Control Object structure.">CSL_AcCtrlObject</a>     *pCtrlHandle;
<a name="l00858"></a>00858     <a class="code" href="group__CSL__AC__ENUM.html#ga96d9d570b52f08fac1ac8f79109af276" title="This Enum defines the Audio request return values.">CSL_AcRequestRet</a>     retStat;
<a name="l00859"></a>00859 
<a name="l00860"></a>00860     pAcClassHdl = (<a class="code" href="group__CSL__AC__DATASTRUCT.html#ga8fc85595df27054f7e846cf80f893ffc" title="Audio Class class handle.">pAcClassHandle</a>)(pAcObj);
<a name="l00861"></a>00861     pCtrlHandle  = &amp;pAcClassHdl-&gt;<a class="code" href="structCSL__AcClassStruct.html#a9bb526f1e538af0e9437e94cb64a932b" title="Handle to Control Object.">ctrlHandle</a>;
<a name="l00862"></a>00862     retStat      = CSL_AC_REQUEST_GET_ACK;
<a name="l00863"></a>00863 
<a name="l00864"></a>00864     <span class="comment">/* Compare the Interface with the bNumInterfaces byte of Configuration Descriptor */</span>
<a name="l00865"></a>00865     <span class="keywordflow">if</span>(usbSetup-&gt;<a class="code" href="structCSL__UsbSetupStruct.html#a3dae40396cdd9c4d62e7e1a017d94774" title="Byte 4 and 5 setup packet.">wIndex</a> == 0)
<a name="l00866"></a>00866     {
<a name="l00867"></a>00867         <span class="comment">/* Send the current Interface Value */</span>
<a name="l00868"></a>00868         pCtrlHandle-&gt;<a class="code" href="structCSL__AcCtrlObject.html#a5955e5cb802d96a8bf41ed29562879fc" title="Array used for General Purpose.">ctrlBuffer</a>[1] = 0;
<a name="l00869"></a>00869         <a class="code" href="group__CSL__USB__FUNCTION.html#ga0976835f84a5fedd800c643e6c86703e">USB_postTransaction</a>(hInEp, 1, &amp;pCtrlHandle-&gt;<a class="code" href="structCSL__AcCtrlObject.html#a5955e5cb802d96a8bf41ed29562879fc" title="Array used for General Purpose.">ctrlBuffer</a>[0],
<a name="l00870"></a>00870                             <a class="code" href="group__CSL__USB__SYMBOL.html#ga7bd2d646e37049bcdf340f27ca927e29" title="USB IO Flags.">CSL_USB_IOFLAG_NONE</a>);
<a name="l00871"></a>00871     }
<a name="l00872"></a>00872     <span class="keywordflow">else</span>
<a name="l00873"></a>00873     {
<a name="l00874"></a>00874         <span class="comment">/*  Interface specified doent exist, STALL the endpoint */</span>
<a name="l00875"></a>00875         retStat = CSL_AC_REQUEST_STALL;
<a name="l00876"></a>00876     }
<a name="l00877"></a>00877 
<a name="l00878"></a>00878     <span class="keywordflow">return</span> retStat;
<a name="l00879"></a>00879 }
<a name="l00880"></a>00880 
<a name="l00884"></a>00884 <span class="preprocessor">#ifdef __cplusplus</span>
<a name="l00885"></a>00885 <span class="preprocessor"></span>}
<a name="l00886"></a>00886 <span class="preprocessor">#endif</span>
<a name="l00887"></a>00887 <span class="preprocessor"></span>
<a name="l00888"></a>00888 <span class="preprocessor">#endif    // _CSL_AUDIOCLASSAUX_H_</span>
<a name="l00889"></a>00889 <span class="preprocessor"></span>
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Wed Mar 27 2013 13:32:41 for C55XX CSL LP by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
